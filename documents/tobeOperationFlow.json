{
  "key": "tobeOperationFlow",
  "value": [
    {
      "id": "書籍貸出管理",
      "value": "{\n  \"mermaid\": \"sequenceDiagram\\n    actor 図書館職員\\n    participant 貸出システム\\n    participant 利用者DB\\n    participant 書籍DB\\n    participant メール配信システム\\n    図書館職員->>貸出システム: バーコードで利用者番号読取\\n    貸出システム->>利用者DB: 利用者情報照会\\n    利用者DB-->>貸出システム: 利用者情報返却\\n    貸出システム-->>図書館職員: 利用者情報表示\\n    図書館職員->>貸出システム: バーコードで書籍番号読取\\n    貸出システム->>書籍DB: 書籍情報照会\\n    書籍DB-->>貸出システム: 書籍情報返却\\n    alt 貸出可能な場合\\n        貸出システム->>書籍DB: 貸出状態更新\\n        貸出システム->>利用者DB: 貸出履歴登録\\n        貸出システム->>メール配信システム: 貸出完了メール送信依頼\\n        メール配信システム->>利用者DB: 利用者メールアドレス取得\\n        メール配信システム-->>図書館職員: 貸出完了メール送信\\n        貸出システム-->>図書館職員: 貸出完了通知\\n    else 貸出不可の場合\\n        貸出システム-->>図書館職員: エラー内容表示\\n    end\"\n}"
    },
    {
      "id": "書籍返却管理",
      "value": "{\n  \"mermaid\": \"sequenceDiagram\\n    actor 利用者\\n    participant 図書館職員\\n    participant システム\\n    participant DB\\n    participant メールサーバー\\n    利用者->>図書館職員: 返却書籍を提出\\n    図書館職員->>システム: 書籍のバーコードをスキャン\\n    システム->>DB: 貸出情報照会\\n    DB-->>システム: 貸出情報返却\\n    alt 延滞あり\\n        システム->>DB: 延滞料金計算\\n        DB-->>システム: 延滞料金情報\\n        システム-->>図書館職員: 延滞料金表示\\n        図書館職員->>利用者: 延滞料金支払い依頼\\n        利用者->>図書館職員: 料金支払い\\n    end\\n    システム->>DB: 返却処理実行\\n    DB-->>システム: 処理結果返却\\n    システム->>メールサーバー: 返却完了メール送信\\n    メールサーバー->>利用者: 返却完了メール\\n    システム-->>図書館職員: 返却完了メッセージ表示\\n    図書館職員-->>利用者: 返却完了を伝える\"\n}"
    },
    {
      "id": "書籍マスター管理",
      "value": "{\n  \"mermaid\": \"sequenceDiagram\\n    actor 図書館職員\\n    participant システム\\n    participant 書籍マスター\\n    participant 利用者マスター\\n    participant 貸出マスター\\n\\n    図書館職員->>システム: システムログイン\\n    システム->>図書館職員: メニュー表示\\n\\n    alt 書籍貸出処理\\n        図書館職員->>システム: 利用者番号入力\\n        システム->>利用者マスター: 利用者情報照会\\n        利用者マスター->>システム: 利用者情報返却\\n        システム->>図書館職員: 利用者情報表示\\n        図書館職員->>システム: 書籍番号入力\\n        システム->>書籍マスター: 書籍情報照会\\n        書籍マスター->>システム: 書籍情報返却\\n        システム->>貸出マスター: 貸出情報登録\\n        貸出マスター->>システム: 登録完了\\n        システム->>図書館職員: 貸出完了表示\\n    end\\n\\n    alt 書籍返却処理\\n        図書館職員->>システム: 書籍番号入力\\n        システム->>貸出マスター: 貸出状況照会\\n        貸出マスター->>システム: 貸出情報返却\\n        システム->>貸出マスター: 返却処理実行\\n        貸出マスター->>システム: 返却完了\\n        システム->>図書館職員: 返却完了表示\\n    end\\n\\n    alt 延滞管理処理\\n        システム->>貸出マスター: 延滞書籍照会\\n        貸出マスター->>システム: 延滞情報返却\\n        システム->>利用者マスター: 延滞者情報照会\\n        利用者マスター->>システム: 利用者情報返却\\n        システム->>システム: 延滞通知メール作成\\n        システム->>図書館職員: 延滞リスト表示\\n    end\\n\\n    alt 貸出状況確認\\n        図書館職員->>システム: 検索条件入力\\n        システム->>貸出マスター: 貸出情報照会\\n        貸出マスター->>システム: 貸出情報返却\\n        システム->>図書館職員: 貸出状況一覧表示\\n    end\"\n}"
    },
    {
      "id": "延滞管理",
      "value": "{\n  \"mermaid\": \"sequenceDiagram\\n    participant システム管理者\\n    participant 図書管理システム\\n    participant 延滞チェック処理\\n    participant メール配信\\n    participant 利用者\\n\\n    rect rgb(200, 220, 250)\\n    note right of システム管理者: 延滞管理の自動化処理\\n    図書管理システム->>延滞チェック処理: 毎日午前9時に延滞チェック実行\\n    延滞チェック処理->>延滞チェック処理: 貸出期限超過書籍を抽出\\n    延滞チェック処理->>図書管理システム: 延滞情報を保存\\n    end\\n\\n    alt 延滞書籍あり\\n        延滞チェック処理->>メール配信: 延滞者リストを送信\\n        メール配信->>利用者: 延滞通知メールを送信\\n        メール配信->>図書管理システム: メール送信記録を保存\\n        利用者-->>図書管理システム: 延滞書籍の返却\\n        図書管理システム->>図書管理システム: 延滞状態解除\\n        図書管理システム->>システム管理者: 延滞解消通知\\n    else 延滞書籍なし\\n        延滞チェック処理->>システム管理者: 延滞なしを通知\\n    end\\n\\n    rect rgb(200, 220, 250)\\n    note right of システム管理者: 延滞管理状況の確認\\n    システム管理者->>図書管理システム: 延滞リスト表示要求\\n    図書管理システム->>システム管理者: 延滞状況を表示\\n    システム管理者->>図書管理システム: 延滞統計情報要求\\n    図書管理システム->>システム管理者: 延滞統計レポート表示\\n    end\"\n}"
    },
    {
      "id": "利用者管理",
      "value": "{\n  \"mermaid\": \"sequenceDiagram\\n    actor Staff as 図書館職員\\n    participant System as システム\\n    participant DB as データベース\\n    participant Mail as メールサービス\\n    Staff->>System: 利用者管理画面を開く\\n    System->>DB: 利用者一覧を取得\\n    DB-->>System: 利用者データを返却\\n    System-->>Staff: 利用者一覧を表示\\n    alt 新規登録\\n        Staff->>System: 利用者情報を入力\\n        System->>System: 入力値バリデーション\\n        System->>DB: 重複チェック\\n        DB-->>System: チェック結果返却\\n        System->>System: 利用者番号を生成\\n        System->>DB: 利用者情報を登録\\n        DB-->>System: 登録完了\\n        System->>Mail: 登録完了メール送信\\n        Mail-->>System: 送信完了\\n        System-->>Staff: 登録完了画面表示\\n    else 利用者情報更新\\n        Staff->>System: 利用者を選択\\n        System->>DB: 利用者情報取得\\n        DB-->>System: 利用者データ返却\\n        System-->>Staff: 利用者情報表示\\n        Staff->>System: 情報更新入力\\n        System->>System: 入力値バリデーション\\n        System->>DB: 利用者情報を更新\\n        DB-->>System: 更新完了\\n        System->>Mail: 更新完了メール送信\\n        Mail-->>System: 送信完了\\n        System-->>Staff: 更新完了画面表示\\n    end\"\n}"
    },
    {
      "id": "貸出状況管理",
      "value": "{\n  \"mermaid\": \"sequenceDiagram\\n    actor 図書館職員\\n    participant システム\\n    participant DB\\n    図書館職員->>システム: 貸出状況照会選択\\n    システム->>図書館職員: 検索条件入力画面表示\\n    rect rgb(200, 255, 200)\\n    図書館職員->>システム: 検索条件入力\\n    Note right of システム: 書籍番号または利用者番号を入力\\n    システム->>DB: 貸出状況データ検索\\n    DB->>システム: 貸出状況データ返却\\n    システム->>図書館職員: 貸出状況一覧表示\\n    end\\n    alt 詳細確認が必要な場合\\n        図書館職員->>システム: 詳細表示選択\\n        システム->>DB: 詳細データ検索\\n        DB->>システム: 詳細データ返却\\n        システム->>図書館職員: 貸出状況詳細表示\\n    else CSV出力が必要な場合\\n        図書館職員->>システム: CSV出力要求\\n        システム->>DB: 貸出データ抽出\\n        DB->>システム: 貸出データ返却\\n        システム->>図書館職員: CSVファイル出力\\n    end\\n    opt 延滞者がいる場合\\n        図書館職員->>システム: 延滞者リスト表示要求\\n        システム->>図書館職員: 延滞者一覧表示\\n    end\"\n}"
    }
  ]
}
